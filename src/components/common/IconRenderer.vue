<script setup lang="ts">
import { computed } from 'vue';
import { Icon } from '@iconify/vue';

/**
 * IconRenderer - Emoji to Iconify SVG Icon Mapper
 *
 * Automatically converts emoji strings to modern Phosphor Icons
 * Usage: <IconRenderer emoji="üñºÔ∏è" class="w-5 h-5" />
 */

const props = defineProps<{
    emoji?: string;
    icon?: string; // Direct Iconify icon name (e.g., 'si:openai', 'ph:robot')
}>();

// Emoji to Iconify icon mapping (Phosphor Icons + Simple Icons for brands)
const ICON_MAP: Record<string, string> = {
    // AI & Tech - Generic (used in general context, not brand-specific)
    'ü§ñ': 'ph:robot', // Generic robot/AI icon
    'üß†': 'ph:brain',
    'üî∑': 'ph:diamond',

    // AI Providers - Brand Icons (Simple Icons) - use colored circles
    'üü¢': 'si:openai', // OpenAI (green circle ‚Üí OpenAI logo)
    'üü£': 'si:anthropic', // Anthropic/Claude (purple circle ‚Üí Anthropic logo)
    'üîµ': 'si:google', // Google/Gemini (blue circle ‚Üí Google logo)
    '‚ö™': 'ph:circle', // Generic/None
    'üíª': 'si:visualstudiocode', // VS Code / Code editors
    'üöÄ': 'ph:rocket', // Antigravity (keep rocket)
    'üè†': 'ph:house', // Local

    // File Types & Documents
    'üìÑ': 'ph:file-text',
    'üìÅ': 'ph:folder',
    'üìÇ': 'ph:folder-open',
    'üìù': 'ph:note-pencil',
    'üñºÔ∏è': 'ph:image',
    'üé¨': 'ph:film-strip',
    'üéµ': 'ph:music-note',
    'üé®': 'ph:palette',
    'üìä': 'ph:chart-bar',
    'üì¶': 'ph:package',
    'üóÇÔ∏è': 'ph:files',
    'üóÑÔ∏è': 'ph:database',
    'üìú': 'ph:scroll',
    'üîÄ': 'ph:git-diff',
    'üìã': 'ph:clipboard',
    'üìÖ': 'ph:calendar',
    'üóìÔ∏è': 'ph:calendar-blank',
    'üì≠': 'ph:mailbox',

    // Web & Network
    'üåê': 'ph:globe',
    '‚òÅÔ∏è': 'ph:cloud',
    'üå™Ô∏è': 'ph:tornado',
    'üîó': 'ph:link', // Generic link icon (not Git)

    // Integration Services (using brand icons where available)
    'üí¨': 'simple-icons:slack', // Slack
    'üéÆ': 'simple-icons:discord', // Discord
    'üìö': 'simple-icons:git', // Git
    // ‚òÅÔ∏è already mapped above to ph:cloud, using for Google Drive context
    'üîî': 'ph:bell', // Webhooks/Notifications

    // Actions & Symbols
    '‚ö°': 'ph:lightning',
    'üîÆ': 'ph:crystal-ball',
    'üéØ': 'ph:target',
    'üí°': 'ph:lightbulb',
    '‚öôÔ∏è': 'ph:gear',
    '‚ö†Ô∏è': 'ph:warning',
    'üõ†Ô∏è': 'ph:wrench',
    'üèóÔ∏è': 'ph:buildings',
    '‚ú®': 'ph:sparkle',
    'üîç': 'ph:magnifying-glass',
    'üåä': 'ph:waves',
    '‚úÖ': 'ph:check-circle',
    'üïê': 'ph:clock',
    'üë§': 'ph:user',
    'üñ•Ô∏è': 'ph:monitor',
    'üíö': 'ph:heart',

    // Default fallback
    '‚ùì': 'ph:question',
};

// If icon prop is provided directly, use it; otherwise map from emoji
const iconName = computed(() => {
    if (props.icon) return props.icon;
    if (props.emoji) return ICON_MAP[props.emoji] || ICON_MAP['‚ùì'];
    return ICON_MAP['‚ùì'];
});
</script>

<template>
    <Icon :icon="iconName" />
</template>
